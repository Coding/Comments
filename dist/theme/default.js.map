{"version":3,"sources":["../../src/theme/default.js"],"names":["renderInit","instance","meta","user","error","container","document","createElement","lang","className","errorBlock","login","toLowerCase","owner","initHint","initButton","onclick","setAttribute","init","catch","removeAttribute","alert","e","innerText","appendChild","renderHeader","reactions","commentsCount","innerHTML","comments","html_url","issueLink","href","target","renderComments","commentReactions","currentPage","undefined","loading","length","emptyBlock","commentsList","forEach","locale","commentDate","comment","created_at","createDate","fromNow","createDateDetail","format","commentItem","path","avatar","startsWith","name","up_vote_counts","content","likeButton","querySelector","likedReaction","up_vote_users","find","likeUser","global_key","classList","add","unlikeAComment","id","remove","likeAComment","replyButton","findPos","obj","curtop","offsetParent","offsetTop","writeField","parentElement","textarea","value","window","scrollTo","focus","imgTrigger","markdownBody","src","onload","clientHeight","maxCommentHeight","style","maxHeight","title","pageCount","Math","ceil","child_count","perPage","pagination","previousButton","goto","i","pageItem","nextButton","renderEditor","shouldDisable","disabledTip","avatar_url","isLoggingIn","loginLink","logout","previewField","oninput","height","getComputedStyle","parseInt","scrollHeight","querySelectorAll","writeTab","previewTab","preview","trim","markdown","then","html","submitButton","doSubmit","post","onkeydown","ctrlKey","metaKey","keyCode","preventDefault","renderFooter","render","state"],"mappings":"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","file":"default.js","sourcesContent":["import moment from 'moment'\nimport {\n  coding as codingIcon,\n  heart as heartIcon,\n  reply as replyIcon,\n  spinner as spinnerIcon,\n} from '../icons'\nimport { NOT_INITIALIZED_ERROR } from '../constants'\n\nfunction renderInit({ meta, user, error }, instance) {\n  const container = document.createElement('div')\n  container.lang = instance.lang\n  container.className = 'gitment-container gitment-init-container'\n\n  if (error) {\n    const errorBlock = document.createElement('div')\n    errorBlock.className = 'gitment-init-error'\n\n    if (error === NOT_INITIALIZED_ERROR\n      && user.login\n      && user.login.toLowerCase() === instance.owner.toLowerCase()) {\n      const initHint = document.createElement('div')\n      const initButton = document.createElement('button')\n      initButton.className = 'gitment-init-btn'\n      initButton.onclick = () => {\n        initButton.setAttribute('disabled', true)\n        instance.init()\n          .catch(e => {\n            initButton.removeAttribute('disabled')\n            alert(e)\n          })\n      }\n      initButton.innerText = '初始化讨论'\n      initHint.appendChild(initButton)\n      errorBlock.appendChild(initHint)\n    } else {\n      errorBlock.innerText = error\n    }\n    container.appendChild(errorBlock)\n    return container\n  }\n  return container\n}\n\nfunction renderHeader({ meta, user, reactions }, instance) {\n  const container = document.createElement('div')\n  container.lang = instance.lang\n  container.className = 'gitment-container gitment-header-container'\n\n  const commentsCount = document.createElement('span')\n  commentsCount.innerHTML = `\n    ${ meta.comments\n    ? ` • <strong>${meta.comments}</strong> Comments`\n    : ''\n    }\n  `\n  container.appendChild(commentsCount)\n\n  if (meta.html_url) {\n    const issueLink = document.createElement('a')\n    issueLink.className = 'gitment-header-issue-link'\n    issueLink.href = meta.html_url\n    issueLink.target = '_blank'\n    issueLink.innerText = '管理评论'\n    container.appendChild(issueLink)\n  }\n\n  return container\n}\n\nfunction renderComments({ meta, comments, commentReactions, currentPage, user, error }, instance) {\n  const container = document.createElement('div')\n  container.lang = instance.lang\n  container.className = 'gitment-container gitment-comments-container'\n\n  if (error) {\n    return container\n  }\n\n  if (comments === undefined) {\n    const loading = document.createElement('div')\n    loading.innerText = '加载评论中...'\n    loading.className = 'gitment-comments-loading'\n    container.appendChild(loading)\n    return container\n  } else if (!comments.length) {\n    const emptyBlock = document.createElement('div')\n    emptyBlock.className = 'gitment-comments-empty'\n    emptyBlock.innerText = '还没有评论'\n    container.appendChild(emptyBlock)\n    return container\n  }\n\n  const commentsList = document.createElement('ul')\n  commentsList.className = 'gitment-comments-list'\n\n  comments.forEach(comment => {\n    moment.locale(instance.lang)\n    const commentDate = moment(comment.created_at)\n    const createDate = commentDate.fromNow()\n    const createDateDetail = commentDate.format('L HH:mm')\n    const commentItem = document.createElement('li')\n    commentItem.className = 'gitment-comment'\n    commentItem.innerHTML = `\n      <a class=\"gitment-comment-avatar\" href=\"https://coding.net${comment.owner.path}\" target=\"_blank\">\n        <img class=\"gitment-comment-avatar-img\" src=\"${comment.owner.avatar.startsWith('http') ? comment.owner.avatar : 'https://coding.net'+comment.owner.avatar}\"/>\n      </a>\n      <div class=\"gitment-comment-main\">\n        <div class=\"gitment-comment-header\">\n          <a class=\"gitment-comment-name\" href=\"https://coding.net${comment.owner.path}\" target=\"_blank\">\n            ${comment.owner.name}\n          </a>\n          评论于\n          <span title=\"${createDateDetail}\">${createDate}</span>\n          <div class=\"gitment-comment-like-btn\">${heartIcon} ${comment.up_vote_counts || ''}</div>\n          <div class=\"gitment-comment-reply-btn\">${replyIcon}</div>\n        </div>\n        <div class=\"gitment-comment-body gitment-markdown\">${comment.content}</div>\n      </div>\n    `\n    const likeButton = commentItem.querySelector('.gitment-comment-like-btn')\n    const likedReaction = comment.up_vote_users\n      && comment.up_vote_users.find(likeUser => (\n            likeUser.global_key === user.global_key\n      ))\n\n    if (likedReaction) {\n      likeButton.classList.add('liked')\n      likeButton.onclick = () => instance.unlikeAComment(comment.id)\n    } else {\n      likeButton.classList.remove('liked')\n      likeButton.onclick = () => instance.likeAComment(comment.id)\n    }\n\n    const replyButton = commentItem.querySelector('.gitment-comment-reply-btn')\n    replyButton.onclick = () => {\n      //Finds y value of given object\n      function findPos(obj) {\n        var curtop = 0;\n        if (obj.offsetParent) {\n            do {\n                curtop += obj.offsetTop;\n            } while (obj = obj.offsetParent);\n        return curtop;\n        }\n      }\n      const writeField = container.parentElement.parentElement.querySelector('.gitment-editor-write-field')\n      const textarea = writeField.querySelector('textarea')\n      textarea.value += '@' + comment.owner.global_key + ' '\n      window.scrollTo(0, findPos(textarea))\n      textarea.focus()\n    }\n\n    // dirty\n    // use a blank image to trigger height calculating when element rendered\n    const imgTrigger = document.createElement('img')\n    const markdownBody = commentItem.querySelector('.gitment-comment-body')\n    imgTrigger.className = 'gitment-hidden'\n    imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\"\n    imgTrigger.onload = () => {\n      if (markdownBody.clientHeight > instance.maxCommentHeight) {\n        markdownBody.classList.add('gitment-comment-body-folded')\n        markdownBody.style.maxHeight = instance.maxCommentHeight + 'px'\n        markdownBody.title = 'Click to Expand'\n        markdownBody.onclick = () => {\n          markdownBody.classList.remove('gitment-comment-body-folded')\n          markdownBody.style.maxHeight = ''\n          markdownBody.title = ''\n          markdownBody.onclick = null\n        }\n      }\n    }\n    commentItem.appendChild(imgTrigger)\n\n    commentsList.appendChild(commentItem)\n  })\n\n  container.appendChild(commentsList)\n\n  if (meta) {\n    const pageCount = Math.ceil(meta.child_count / instance.perPage)\n    if (pageCount > 1) {\n      const pagination = document.createElement('ul')\n      pagination.className = 'gitment-comments-pagination'\n\n      if (currentPage > 1) {\n        const previousButton = document.createElement('li')\n        previousButton.className = 'gitment-comments-page-item'\n        previousButton.innerText = '上一页'\n        previousButton.onclick = () => instance.goto(currentPage - 1)\n        pagination.appendChild(previousButton)\n      }\n\n      for (let i = 1; i <= pageCount; i++) {\n        const pageItem = document.createElement('li')\n        pageItem.className = 'gitment-comments-page-item'\n        pageItem.innerText = i\n        pageItem.onclick = () => instance.goto(i)\n        if (currentPage === i) pageItem.classList.add('gitment-selected')\n        pagination.appendChild(pageItem)\n      }\n\n      if (currentPage < pageCount) {\n        const nextButton = document.createElement('li')\n        nextButton.className = 'gitment-comments-page-item'\n        nextButton.innerText = '下一页'\n        nextButton.onclick = () => instance.goto(currentPage + 1)\n        pagination.appendChild(nextButton)\n      }\n\n      container.appendChild(pagination)\n    }\n  }\n\n  return container\n}\n\nfunction renderEditor({ user, error }, instance) {\n  const container = document.createElement('div')\n  container.lang = instance.lang\n  container.className = 'gitment-container gitment-editor-container'\n\n  const shouldDisable = user.login && !error ? '' : 'disabled'\n  const disabledTip = user.login ? '' : 'Login to Comment'\n  container.innerHTML = `\n      ${ user.login\n        ? `<a class=\"gitment-editor-avatar\" href=\"https://coding.net${user.path}\" target=\"_blank\">\n            <img class=\"gitment-editor-avatar-img\" src=\"${user.avatar_url}\"/>\n          </a>`\n        : user.isLoggingIn\n          ? `<div class=\"gitment-editor-avatar\">${spinnerIcon}</div>`\n          : `<a class=\"gitment-editor-avatar\" href=\"${instance.loginLink}\" title=\"login with Coding.net\">\n              ${codingIcon}\n            </a>`\n      }\n    </a>\n    <div class=\"gitment-editor-main\">\n      <div class=\"gitment-editor-header\">\n        <nav class=\"gitment-editor-tabs\">\n          <button class=\"gitment-editor-tab gitment-selected\">编辑</button>\n          <button class=\"gitment-editor-tab\">预览</button>\n        </nav>\n        <div class=\"gitment-editor-login\">\n          ${ user.login\n            ? '<a class=\"gitment-editor-logout-link\">退出</a>'\n            : user.isLoggingIn\n              ? '登录中...'\n              : `使用 Coding.net 账号 <a class=\"gitment-editor-login-link\" href=\"${instance.loginLink}\">登录</a>`\n          }\n        </div>\n      </div>\n      <div class=\"gitment-editor-body\">\n        <div class=\"gitment-editor-write-field\">\n          <textarea placeholder=\"留下您的评论...\" title=\"${disabledTip}\" ${shouldDisable}></textarea>\n        </div>\n        <div class=\"gitment-editor-preview-field gitment-hidden\">\n          <div class=\"gitment-editor-preview gitment-markdown\"></div>\n        </div>\n      </div>\n    </div>\n    <div class=\"gitment-editor-footer\">\n      <a class=\"gitment-editor-footer-tip\" href=\"https://github.com/Coding/Comments\" target=\"_blank\">\n      由 Coding Comments 驱动\n      </a>\n      <button class=\"gitment-editor-submit\" title=\"${disabledTip}\" ${shouldDisable}>评论</button>\n    </div>\n  `\n  if (user.login) {\n    container.querySelector('.gitment-editor-logout-link').onclick = () => instance.logout()\n  }\n\n  const writeField = container.querySelector('.gitment-editor-write-field')\n  const previewField = container.querySelector('.gitment-editor-preview-field')\n\n  const textarea = writeField.querySelector('textarea')\n  textarea.oninput = () => {\n    textarea.style.height = 'auto'\n    const style = window.getComputedStyle(textarea, null)\n    const height = parseInt(style.height, 10)\n    const clientHeight = textarea.clientHeight\n    const scrollHeight = textarea.scrollHeight\n    if (clientHeight < scrollHeight) {\n      textarea.style.height = (height + scrollHeight - clientHeight) + 'px'\n    }\n  }\n\n  const [writeTab, previewTab] = container.querySelectorAll('.gitment-editor-tab')\n  writeTab.onclick = () => {\n    writeTab.classList.add('gitment-selected')\n    previewTab.classList.remove('gitment-selected')\n    writeField.classList.remove('gitment-hidden')\n    previewField.classList.add('gitment-hidden')\n\n    textarea.focus()\n  }\n  previewTab.onclick = () => {\n    previewTab.classList.add('gitment-selected')\n    writeTab.classList.remove('gitment-selected')\n    previewField.classList.remove('gitment-hidden')\n    writeField.classList.add('gitment-hidden')\n\n    const preview = previewField.querySelector('.gitment-editor-preview')\n    const content = textarea.value.trim()\n    if (!content) {\n      preview.innerText = 'Nothing to preview'\n      return\n    }\n\n    preview.innerText = 'Loading preview...'\n    instance.markdown(content)\n      .then(html => preview.innerHTML = html)\n  }\n\n  const submitButton = container.querySelector('.gitment-editor-submit')\n\n  const doSubmit = () => {\n    submitButton.innerText = '提交中...'\n    submitButton.setAttribute('disabled', true)\n    instance.post(textarea.value.trim())\n      .then(data => {\n        textarea.value = ''\n        textarea.style.height = 'auto'\n        submitButton.removeAttribute('disabled')\n        submitButton.innerText = '评论'\n      })\n      .catch(e => {\n        alert(e)\n        submitButton.removeAttribute('disabled')\n        submitButton.innerText = '评论'\n      })\n  }\n\n  submitButton.onclick = doSubmit\n\n  textarea.onkeydown = (e) => {\n    if ((e.ctrlKey || e.metaKey) && (e.keyCode == 13 || e.keyCode == 10)) {\n      e.preventDefault()\n      doSubmit()\n    }\n  }\n\n  return container\n}\n\nfunction renderFooter() {\n  const container = document.createElement('div')\n  container.lang = instance.lang\n  container.className = 'gitment-container gitment-footer-container'\n  container.innerHTML = `\n    Powered by\n    <a class=\"gitment-footer-project-link\" href=\"https://github.com/Coding/Comments\" target=\"_blank\">\n      Coding Comments\n    </a>\n  `\n  return container\n}\n\nfunction render(state, instance) {\n  const container = document.createElement('div')\n  container.lang = instance.lang\n  container.className = 'gitment-container gitment-root-container'\n  container.appendChild(instance.renderInit(state, instance))\n  container.appendChild(instance.renderEditor(state, instance))\n  container.appendChild(instance.renderHeader(state, instance))\n  container.appendChild(instance.renderComments(state, instance))\n  // container.appendChild(instance.renderFooter(state, instance))\n  return container\n}\n\nexport default { render, renderInit, renderHeader, renderComments, renderEditor, renderFooter }\n"]}